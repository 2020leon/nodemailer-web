<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.53" />
    <meta name="description" content="Nodemailer is a module for Node.js to send emails">
<meta name="author" content="Andris Reinman">

    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/images/favicon.png" type="image/x-icon" />
    <title>Node.js daemons :: Nodemailer</title>

    
    <link href="/css/nucleus.css?1547037618" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1547037618" rel="stylesheet">
    <link href="/css/hybrid.css?1547037618" rel="stylesheet">
    <link href="/css/featherlight.min.css?1547037618" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1547037618" rel="stylesheet">
    <link href="/css/auto-complete.css?1547037618" rel="stylesheet">
    <link href="/css/theme.css?1547037618" rel="stylesheet">
    <link href="/css/hugo-theme.css?1547037618" rel="stylesheet">
    
      <link href="/css/theme-blue.css?1547037618" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1547037618"></script>

    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    <style>
  #sidebar #header-wrapper {
    background-color: white;
  }
  #sidebar #header-wrapper a {
    color: #07689f;
  }

  #ads {
     
    max-width: 260px;
     
    margin: 3px auto 10px auto;
     
    font-size: 13px;
    color: #07689f;
  }

  #carbonads {
    display: block;
    margin: 0 auto;
    --width: 180px;
    --font-size: 14px;
  }

  #carbonads {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", Helvetica, Arial,
      sans-serif;
    display: block;
    overflow: hidden;
    margin-bottom: 20px;
    max-width: var(--width);
    border-radius: 4px;
    text-align: center;
    box-shadow: 0 0 0 1px hsla(0, 0%, 0%, 0.1);
    background-color: hsl(0, 0%, 98%);
    font-size: var(--font-size);
    line-height: 1.5;
  }

  #carbonads a {
    color: inherit;
    text-decoration: none;
  }

  #carbonads a:hover {
    color: inherit;
  }

  #carbonads span {
    position: relative;
    display: block;
    overflow: hidden;
  }

  .carbon-img {
    display: block;
    margin-bottom: 8px;
    max-width: var(--width);
    line-height: 1;
  }

  .carbon-img img {
    display: block;
    margin: 0 auto;
    max-width: var(--width) !important;
    width: var(--width);
    height: auto;
  }

  .carbon-text {
    display: block;
    padding: 0 1em 8px;
  }

  .carbon-poweredby {
    display: block;
    padding: 10px var(--font-size);
    background: repeating-linear-gradient(
        -45deg,
        transparent,
        transparent 5px,
        hsla(0, 0%, 0%, 0.025) 5px,
        hsla(0, 0%, 0%, 0.025) 10px
      )
      hsla(203, 11%, 95%, 0.4);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-weight: 600;
    font-size: 9px;
    line-height: 0;
  }

  #chapter p {
      text-align: left;
  }
</style>

  </head>
  <body class="" data-url="/extras/daemons/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://nodemailer.com">
  <img src="/nm_logo_200x136.png" alt="Nodemailer" />
</a>

    </div>
    
        <p>
  <a
    href="http://outfunnel.com/?utm_source=nodemailer&amp;utm_campaign=nodemailer&amp;utm_medium=header-link"
    >Powered by <b>Outfunnel</b></a
  >
</p>

    
  </div>

    <div class="highlightable">

    <div id="ads">
      <script
        async
        type="text/javascript"
        src="https://cdn.carbonads.com/carbon.js?serve=CKYIE27U&placement=nodemailercom"
        id="_carbonads_js"
      ></script>
    </div>

    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/about/" title="Nodemailer" class="dd-item
        
        
        
        ">
      <a href="/about/">
          <b>1. </b>Nodemailer
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/about/migrate/" title="Migration" class="dd-item ">
        <a href="/about/migrate/">
        Migration
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/about/license/" title="License" class="dd-item ">
        <a href="/about/license/">
        License
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/usage/" title="Usage" class="dd-item
        
        
        
        ">
      <a href="/usage/">
          <b>2. </b>Usage
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/usage/why-smtp/" title="SMTP? Say what?" class="dd-item ">
        <a href="/usage/why-smtp/">
        SMTP? Say what?
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/usage/using-gmail/" title="Using Gmail" class="dd-item ">
        <a href="/usage/using-gmail/">
        Using Gmail
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/usage/bulk-mail/" title="Delivering bulk mail" class="dd-item ">
        <a href="/usage/bulk-mail/">
        Delivering bulk mail
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/message/" title="Message configuration" class="dd-item
        
        
        
        ">
      <a href="/message/">
          <b>3. </b>Message configuration
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/message/attachments/" title="Attachments" class="dd-item ">
        <a href="/message/attachments/">
        Attachments
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/message/alternatives/" title="Alternatives" class="dd-item ">
        <a href="/message/alternatives/">
        Alternatives
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/message/addresses/" title="Address object" class="dd-item ">
        <a href="/message/addresses/">
        Address object
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/message/calendar-events/" title="Calendar events" class="dd-item ">
        <a href="/message/calendar-events/">
        Calendar events
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/message/embedded-images/" title="Embedded images" class="dd-item ">
        <a href="/message/embedded-images/">
        Embedded images
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/message/list-headers/" title="List headers" class="dd-item ">
        <a href="/message/list-headers/">
        List headers
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/message/custom-headers/" title="Custom headers" class="dd-item ">
        <a href="/message/custom-headers/">
        Custom headers
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/message/custom-source/" title="Custom source" class="dd-item ">
        <a href="/message/custom-source/">
        Custom source
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/smtp/" title="SMTP transport" class="dd-item
        
        
        
        ">
      <a href="/smtp/">
          <b>4. </b>SMTP transport
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/smtp/envelope/" title="SMTP envelope" class="dd-item ">
        <a href="/smtp/envelope/">
        SMTP envelope
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/smtp/pooled/" title="Pooled SMTP" class="dd-item ">
        <a href="/smtp/pooled/">
        Pooled SMTP
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/smtp/testing/" title="Testing SMTP" class="dd-item ">
        <a href="/smtp/testing/">
        Testing SMTP
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/smtp/oauth2/" title="OAuth2" class="dd-item ">
        <a href="/smtp/oauth2/">
        OAuth2
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/smtp/customauth/" title="Custom authentication" class="dd-item ">
        <a href="/smtp/customauth/">
        Custom authentication
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/smtp/proxies/" title="Proxy support" class="dd-item ">
        <a href="/smtp/proxies/">
        Proxy support
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/smtp/dsn/" title="Delivery status notifications" class="dd-item ">
        <a href="/smtp/dsn/">
        Delivery status notifications
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/transports/" title="Other transports" class="dd-item
        
        
        
        ">
      <a href="/transports/">
          <b>5. </b>Other transports
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/transports/sendmail/" title="Sendmail transport" class="dd-item ">
        <a href="/transports/sendmail/">
        Sendmail transport
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/transports/ses/" title="SES transport" class="dd-item ">
        <a href="/transports/ses/">
        SES transport
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/transports/stream/" title="Stream transport" class="dd-item ">
        <a href="/transports/stream/">
        Stream transport
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/plugins/" title="Plugins" class="dd-item
        
        
        
        ">
      <a href="/plugins/">
          <b>6. </b>Plugins
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/plugins/create/" title="Create plugins" class="dd-item ">
        <a href="/plugins/create/">
        Create plugins
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/dkim/" title="DKIM" class="dd-item
        
        
        
        ">
      <a href="/dkim/">
          <b>7. </b>DKIM
          
      </a>
      
      
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/extras/" title="Extra modules" class="dd-item
        parent
        
        
        ">
      <a href="/extras/">
          <b>8. </b>Extra modules
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            


 
  
    
      <li data-nav-id="/extras/smtp-server/" title="SMTP Server" class="dd-item ">
        <a href="/extras/smtp-server/">
        SMTP Server
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/extras/smtp-connection/" title="SMTP Connection" class="dd-item ">
        <a href="/extras/smtp-connection/">
        SMTP Connection
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/extras/mailparser/" title="Mailparser" class="dd-item ">
        <a href="/extras/mailparser/">
        Mailparser
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/extras/mailcomposer/" title="Mailcomposer" class="dd-item ">
        <a href="/extras/mailcomposer/">
        Mailcomposer
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/extras/daemons/" title="Node.js daemons" class="dd-item active">
        <a href="/extras/daemons/">
        Node.js daemons
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      <div style="text-align: center; margin-bottom:10px;">
  <form
    action="https://www.paypal.com/cgi-bin/webscr"
    method="post"
    target="_top"
  >
    <input type="hidden" name="cmd" value="_s-xclick" />
    <input type="hidden" name="hosted_button_id" value="DB26KWR2BQX5W" />
    <input
      type="image"
      src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif"
      border="0"
      name="submit"
      alt="PayPal - The safer, easier way to pay online!"
      style="display: inline"
    />
    <img
      alt=""
      border="0"
      src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif"
      width="1"
      height="1"
    />
  </form>
</div>

<div style="margin: 0 auto;">
  <script src="https://opencollective.com/nodemailer/banner.js"></script>
</div>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Nodemailer</a> > <a href='/extras/'>Extra modules</a> > Node.js daemons
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#1-application">1. Application</a></li>
<li><a href="#2-setting-up-git">2. Setting up git</a></li>
<li><a href="#3-setting-up-server">3. Setting up server</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Node.js daemons</h1>
          

        




<p>This tutorial shows how to set up Node.js applications as daemon services under Linux. Specifically the following would apply:</p>

<ul>
<li>The daemon application is a Node.js web app</li>
<li>Daemon is set up as a SystemD services</li>
<li>Node.js app is accessed as a Nginx virtual domain</li>
<li>Updates are deployed using git</li>
</ul>

<blockquote>
<p>Even though this tutorial uses a web app as the service daemon, then the same approach can be used for deploying any kind of services.</p>
</blockquote>

<h3 id="1-application">1. Application</h3>

<p>The application code is simple, it consists only from two files, the application script and package.json. It&rsquo;s a Node.js app that serves web requests at port 3000. For demo purposes the app uses <a href="https://www.npmjs.com/package/npmlog">npmlog</a> as a dependency that is only needed to demonstrate deploying dependencies.</p>

<pre><code class="language-javascript">// index.js
const http = require(&quot;http&quot;);
const log = require(&quot;npmlog&quot;);

const hostname = &quot;127.0.0.1&quot;;
const port = 3000;

const server = http.createServer((req, res) =&gt; {
  res.statusCode = 200;
  res.setHeader(&quot;Content-Type&quot;, &quot;text/plain&quot;);
  res.end(&quot;Hello World\n&quot;);
  log.http(&quot;App&quot;, req.url);
});

server.listen(port, hostname, () =&gt; {
  log.info(&quot;App&quot;, `Server running at http://${hostname}:${port}/`);
});
</code></pre>

<pre><code class="language-json">{
  &quot;name&quot;: &quot;demo-app&quot;,
  &quot;private&quot;: true,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;dependencies&quot;: {
    &quot;npmlog&quot;: &quot;^4.1.2&quot;
  },
  &quot;license&quot;: &quot;ISC&quot;
}
</code></pre>

<h3 id="2-setting-up-git">2. Setting up git</h3>

<p>Assuming we have these two files in a directory, let&rsquo;s set up git repository</p>

<pre><code class="language-bash">$ git init
  Initialized empty Git repository in ~/demo-app/.git/
$ git add .
$ git commit -m Initial
  [master (root-commit) 057e7f3] initial
   2 files changed, 27 insertions(+)
   create mode 100644 index.js
   create mode 100644 package.json
</code></pre>

<p>For now we do not set up remote repository, let&rsquo;s leave this for later.</p>

<h3 id="3-setting-up-server">3. Setting up server</h3>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/extras/mailcomposer/" title="Mailcomposer"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/extras/smtp-server/" title="SMTP Server" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1547037618"></script>
    <script src="/js/perfect-scrollbar.min.js?1547037618"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1547037618"></script>
    <script src="/js/jquery.sticky.js?1547037618"></script>
    <script src="/js/featherlight.min.js?1547037618"></script>
    <script src="/js/html5shiv-printshiv.min.js?1547037618"></script>
    <script src="/js/highlight.pack.js?1547037618"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js?1547037618"></script>
    <script src="/js/learn.js?1547037618"></script>
    <script src="/js/hugo-learn.js?1547037618"></script>

    <link href="/mermaid/mermaid.css?1547037618" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1547037618"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

